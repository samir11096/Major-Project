---
- hosts: webserver
  vars:
    - docker_compose_version: "1.29.2"
    - project_name : "Lib-Help"

  tasks:
    # Install Docker
    - name: Install Docker
      apt:
        name: docker.io
        state: present

    # Install Docker Compose
    - name: Install Docker Compose
      apt:
        name: docker-compose
        state: present

    # Create directory for Docker Compose files
    - name: Create Docker Compose directory
      file:
        path: /{{ project_name }}/docker-compose
        state: directory

    # Copy Docker Compose file
    - name: Copy Docker Compose file
      copy:
        src: docker-compose.yml
        dest: /{{ project_name }}/docker-compose/docker-compose.yml

    # Pull Docker images
    - name: Pull Docker images
      docker_compose:
        project_src: /{{ project_name }}/docker-compose
        version: "{{ docker_compose_version }}"
        pull: yes

    # Start Docker Compose containers
    - name: Start Docker Compose containers
      docker_compose:
        project_src: /{{ project_name }}/docker-compose
        version: "{{ docker_compose_version }}"
        up: yes

